Overhaul subscription and user models